<!DOCTYPE html>
<html lang="en">

<head>
    <title>Steampipe Report</title>
    <style>
        /**
       {{- template "normalize_css" -}}
       **/
        /**
       {{- template "style_css" -}}
       **/
    </style>
    <meta charset="UTF-8">
    <link rel="icon" href="{{ template "favicon"}}" type="image/svg+xml" sizes="any">
</head>

<body>
    <div class="container">
        <div class="brand">
            <img class="logo" src="{{ template "logo"}}"
                alt="Steampipe Report" />
        </div>
        {{ if .Root.ControlRuns }}
        <section class="group">
            <div class="controls">
                {{ range .Root.ControlRuns}}
                {{ template "control_run_template" . }}
                {{ end }}
            </div>
        </section>
        {{ end }}
        {{ range .Root.Groups }}
        {{ template "group_template" . }}
        {{ end }}
    </div>
</body>

</html>

{{ define "summary" }}
<div class="summary">
    <div class="status ok">{{ .Ok }} <span>OK</span> </div>
    <div class="status skip">{{ .Skip }} <span>Skip</span> </div>
    <div class="status info">{{ .Info }} <span>Info</span> </div>
    <div class="status alarm">{{ .Alarm }} <span>Alarm</span></div>
    <div class="status error">{{ .Error }} <span>Error</span> </div>
</div>
{{ end }}

{{ define "group_template"}}
<section class="group">
    <header class="overview">
        <div class="title">{{ .Title }}</div>
        {{ template "summary" .Summary.Status }}
    </header>
    {{ if .ControlRuns }}
    <div class="controls">
        {{ range .ControlRuns}}
        {{ template "control_run_template" . }}
        {{ end }}
    </div>
    {{ end }}
    {{ range .Groups }}
    {{ template "group_template" . }}
    {{ end }}
</section>
{{ end }}

{{ define "control_run_template"}}
<div class="control">
    <header class="overview">
        <div class="title">{{ .Title }}</div>
        {{ template "summary" .Summary }}
    </header>
    {{ if .GetError }}
    <div class="run-error"><span>Error:</span>{{ .GetError }}</div>
    {{ else }}
    {{ range .Rows }}
    <div class="result-row {{ .Status }}">
        <div class="status">{{ .Status }}</div>
        <div class="reason-resource">
            {{ .Reason }}
        </div>
        {{ range .Dimensions }}
        <div class="dimension">{{ .Value }}</div>
        {{ end }}
    </div>
    {{ end }}
    <!-- end for range.Rows -->
    {{ end }}
    <!-- end for if-else block -->
</div>
{{ end }}
